#:kivy 2.0.0

# Define um estilo base para os botões
<BotaoBase@Button>:
    font_size: '18sp'
    size_hint_y: None
    height: '48dp'
    background_color: (0.2, 0.6, 0.8, 1)
    background_normal: '' # Necessário para a cor funcionar

# Define um estilo base para os inputs
<InputBase@TextInput>:
    font_size: '18sp'
    size_hint_y: None
    height: '48dp'
    multiline: False

# --- Tela de Login ---
<LoginScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: [40, 40]
        spacing: 15
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        size_hint: (None, None)
        width: 400
        height: 400
        # Fundo do "card" de login
        canvas.before:
            Color:
                rgba: (0.2, 0.2, 0.2, 1)
            RoundedRectangle:
                pos: self.pos
                size: self.size
                radius: [10]

        Label:
            text: 'Acesso ao Painel'
            font_size: '24sp'
            size_hint_y: None
            height: '50dp'

        Label:
            text: 'Usuário:'
            halign: 'left'
            text_size: self.size
            size_hint_y: None
            height: '20dp'

        InputBase:
            id: user_input

        Label:
            text: 'Senha:'
            halign: 'left'
            text_size: self.size
            size_hint_y: None
            height: '20dp'

        InputBase:
            id: pass_input
            password: True

        BotaoBase:
            id: login_button
            text: 'Entrar'
            on_press: root.verificar_login()

        Label:
            id: feedback
            text: ''
            size_hint_y: None
            height: '40dp'

# --- Tela Principal ---
<MainScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 40
        spacing: 20

        Label:
            text: 'Painel Principal'
            font_size: '32sp'
            size_hint_y: 0.2

        BoxLayout:
            orientation: 'vertical'
            spacing: 15
            size_hint_y: 0.6
            pos_hint: {'center_y': 0.5}

            # Este é o novo botão que substitui o campo de texto
            BotaoBase:
                id: record_button
                text: 'Gravar Áudio'
                font_size: '22sp'
                height: '60dp'
                background_color: (0.8, 0.2, 0.2, 1) # Cor de "gravação"
                on_press: root.start_audio_recording()

            Label:
                id: main_feedback
                text: 'Pressione o botão para iniciar a gravação.'
                font_size: '16sp'
                color: (0.7, 0.7, 0.7, 1)

        # Botão de Logout adicionado
        BotaoBase:
            text: 'Sair (Logout)'
            size_hint_y: 0.1
            pos_hint: {'bottom': 1}
            background_color: (0.5, 0.5, 0.5, 1)
            on_press: root.do_logout()#:kivy 2.0.0

# Define um estilo base para os botões
<BotaoBase@Button>:
    font_size: '18sp'
    size_hint_y: None
    height: '48dp'
    background_color: (0.2, 0.6, 0.8, 1)
    background_normal: '' # Necessário para a cor funcionar

# Define um estilo base para os inputs
<InputBase@TextInput>:
    font_size: '18sp'
    size_hint_y: None
    height: '48dp'
    multiline: False

# --- Tela de Login ---
<LoginScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: [40, 40]
        spacing: 15
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        size_hint: (None, None)
        width: 400
        height: 400
        # Fundo do "card" de login
        canvas.before:
            Color:
                rgba: (0.2, 0.2, 0.2, 1)
            RoundedRectangle:
                pos: self.pos
                size: self.size
                radius: [10]

        Label:
            text: 'Acesso ao Painel'
            font_size: '24sp'
            size_hint_y: None
            height: '50dp'

        Label:
            text: 'Usuário:'
            halign: 'left'
            text_size: self.size
            size_hint_y: None
            height: '20dp'

        InputBase:
            id: user_input

        Label:
            text: 'Senha:'
            halign: 'left'
            text_size: self.size
            size_hint_y: None
            height: '20dp'

        InputBase:
            id: pass_input
            password: True

        BotaoBase:
            id: login_button
            text: 'Entrar'
            on_press: root.verificar_login()

        Label:
            id: feedback
            text: ''
            size_hint_y: None
            height: '40dp'

# --- Tela Principal ---
<MainScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 40
        spacing: 20

        Label:
            text: 'Painel Principal'
            font_size: '32sp'
            size_hint_y: 0.2

        BoxLayout:
            orientation: 'vertical'
            spacing: 15
            size_hint_y: 0.6
            pos_hint: {'center_y': 0.5}

            # Este é o novo botão que substitui o campo de texto
            BotaoBase:
                id: record_button
                text: 'Gravar Áudio'
                font_size: '22sp'
                height: '60dp'
                background_color: (0.8, 0.2, 0.2, 1) # Cor de "gravação"
                on_press: root.start_audio_recording()

            Label:
                id: main_feedback
                text: 'Pressione o botão para iniciar a gravação.'
                font_size: '16sp'
                color: (0.7, 0.7, 0.7, 1)

        # Botão de Logout adicionado
        BotaoBase:
            text: 'Sair (Logout)'
            size_hint_y: 0.1
            pos_hint: {'bottom': 1}
            background_color: (0.5, 0.5, 0.5, 1)
            on_press: root.do_logout()
